


<!DOCTYPE html>
<html lang="en">

<head>
    
    <script>
    var TogetherJSConfig_autoStart = true;
    var TogetherJSConfig_suppressJoinConfirmation = true;
    var TogetherJSConfig_dontShowClicks = ":not(canvas"
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous">
    </script>

    <script type="text/javascript">
    (function() {

        var defaultConfiguration = {
            dontShowClicks: false,
            cloneClicks: false,
            enableAnalytics: false,
            analyticsCode: "UA-35433268-28",
            hubBase: null,
            getUserName: null,
            getUserColor: null,
            getUserAvatar: null,
            siteName: null,
            useMinimizedCode: undefined,
            on: {},
            hub_on: {},
            enableShortcut: false,
            toolName: null,
            findRoom: null,
            autoStart: false,
            suppressJoinConfirmation: false,
            suppressInvite: false,
            inviteFromRoom: null,
            storagePrefix: "togetherjs",
            includeHashInUrl: false,
            disableWebRTC: false,
            youtube: true,
            ignoreMessages: ["cursor-update", "keydown", "scroll-update"],
            ignoreForms: [":password"]
        };

        var styleSheet = "/togetherjs/togetherjs.css";

        var baseUrl = "https://togetherjs.com";
        if (baseUrl == "__" + "baseUrl__") {
            baseUrl = "";
        }
        var min = "no" == "__" + "min__" ? false : "no" == "yes";

        var baseUrlOverride = localStorage.getItem("togetherjs.baseUrlOverride");
        if (baseUrlOverride) {
            try {
                baseUrlOverride = JSON.parse(baseUrlOverride);
            } catch (e) {
                baseUrlOverride = null;
            }
            if ((!baseUrlOverride) || baseUrlOverride.expiresAt < Date.now()) {
                localStorage.removeItem("togetherjs.baseUrlOverride");
            } else {
                baseUrl = baseUrlOverride.baseUrl;
                var logger = console.warn || console.log;
                logger.call(console, "Using TogetherJS baseUrlOverride:", baseUrl);
                logger.call(console, "To undo run: localStorage.removeItem('togetherjs.baseUrlOverride')");
            }
        }

        var configOverride = localStorage.getItem("togetherjs.configOverride");
        if (configOverride) {
            try {
                configOverride = JSON.parse(configOverride);
            } catch (e) {
                configOverride = null;
            }
            if ((!configOverride) || configOverride.expiresAt < Date.now()) {
                localStorage.removeItem("togetherjs.configOverride");
            } else {
                var shownAny = false;
                for (var attr in configOverride) {
                    if (attr == "expiresAt" || !configOverride.hasOwnProperty(attr)) {
                        continue;
                    }
                    if (!shownAny) {
                        console.warn("Using TogetherJS configOverride");
                        console.warn("To undo run: localStorage.removeItem('togetherjs.configOverride')");
                    }
                    window["TogetherJSConfig_" + attr] = configOverride[attr];
                    console.log("Config override:", attr, "=", configOverride[attr]);
                }
            }
        }

        var version = "unknown";
        var cacheBust = "";
        if ((!cacheBust) || cacheBust == "") {
            cacheBust = Date.now() + "";
        } else {
            version = cacheBust;
        }

        if (typeof console == "undefined") {
            console = {};
        }
        if (!console.log) {
            console.log = function() {};
        }
        ["debug", "info", "warn", "error"].forEach(function(method) {
            if (!console[method]) {
                console[method] = console.log;
            }
        });

        if (!baseUrl) {
            var scripts = document.getElementsByTagName("script");
            for (var i = 0; i < scripts.length; i++) {
                var src = scripts[i].src;
                if (src && src.search(/togetherjs.js(\?.*)?$/) !== -1) {
                    baseUrl = src.replace(/\/*togetherjs.js(\?.*)?$/, "");
                    console.warn("Detected baseUrl as", baseUrl);
                    break;
                } else if (src && src.search(/togetherjs-min.js(\?.*)?$/) !== -1) {
                    baseUrl = src.replace(/\/*togetherjs-min.js(\?.*)?$/, "");
                    console.warn("Detected baseUrl as", baseUrl);
                    break;
                }
            }
        }
        if (!baseUrl) {
            console.warn("Could not determine TogetherJS's baseUrl (looked for a <script> with togetherjs.js and togetherjs-min.js)");
        }

        function addStyle() {
            var existing = document.getElementById("togetherjs-stylesheet");
            if (!existing) {
                var link = document.createElement("link");
                link.id = "togetherjs-stylesheet";
                link.setAttribute("rel", "stylesheet");
                link.href = baseUrl + styleSheet + "?bust=" + cacheBust;
                document.head.appendChild(link);
            }
        }

        function addScript(url) {
            var script = document.createElement("script");
            script.src = baseUrl + url + "?bust=" + cacheBust;
            document.head.appendChild(script);
        }

        var TogetherJS = window.TogetherJS = function TogetherJS(event) {
            if (TogetherJS.running) {
                var session = TogetherJS.require("session");
                session.close();
                return;
            }
            TogetherJS.startup.button = null;
            try {
                if (event && typeof event == "object") {
                    if (event.target && typeof event) {
                        TogetherJS.startup.button = event.target;
                    } else if (event.nodeType == 1) {
                        TogetherJS.startup.button = event;
                    } else if (event[0] && event[0].nodeType == 1) {
                        // Probably a jQuery element
                        TogetherJS.startup.button = event[0];
                    }
                }
            } catch (e) {
                console.warn("Error determining starting button:", e);
            }
            if (window.TowTruckConfig) {
                console.warn("TowTruckConfig is deprecated; please use TogetherJSConfig");
                if (window.TogetherJSConfig) {
                    console.warn("Ignoring TowTruckConfig in favor of TogetherJSConfig");
                } else {
                    window.TogetherJSConfig = TowTruckConfig;
                }
            }
            if (window.TogetherJSConfig && (!window.TogetherJSConfig.loaded)) {
                TogetherJS.config(window.TogetherJSConfig);
                window.TogetherJSConfig.loaded = true;
            }

            // This handles loading configuration from global variables.  This
            // includes TogetherJSConfig_on_*, which are attributes folded into
            // the "on" configuration value.
            var attr;
            var attrName;
            var globalOns = {};
            for (attr in window) {
                if (attr.indexOf("TogetherJSConfig_on_") === 0) {
                    attrName = attr.substr(("TogetherJSConfig_on_").length);
                    globalOns[attrName] = window[attr];
                } else if (attr.indexOf("TogetherJSConfig_") === 0) {
                    attrName = attr.substr(("TogetherJSConfig_").length);
                    TogetherJS.config(attrName, window[attr]);
                } else if (attr.indexOf("TowTruckConfig_on_") === 0) {
                    attrName = attr.substr(("TowTruckConfig_on_").length);
                    console.warn("TowTruckConfig_* is deprecated, please rename", attr, "to TogetherJSConfig_on_" + attrName);
                    globalOns[attrName] = window[attr];
                } else if (attr.indexOf("TowTruckConfig_") === 0) {
                    attrName = attr.substr(("TowTruckConfig_").length);
                    console.warn("TowTruckConfig_* is deprecated, please rename", attr, "to TogetherJSConfig_" + attrName);
                    TogetherJS.config(attrName, window[attr]);
                }


            }
            var ons = TogetherJS.config.get("on");
            for (attr in globalOns) {
                if (globalOns.hasOwnProperty(attr)) {
                    ons[attr] = globalOns[attr];
                }
            }
            TogetherJS.config("on", ons);
            for (attr in ons) {
                TogetherJS.on(attr, ons[attr]);
            }
            var hubOns = TogetherJS.config.get("hub_on");
            if (hubOns) {
                for (attr in hubOns) {
                    if (hubOns.hasOwnProperty(attr)) {
                        TogetherJS.hub.on(attr, hubOns[attr]);
                    }
                }
            }

            if (!TogetherJS.startup.reason) {
                TogetherJS.startup.reason = "started";
            }

            if (TogetherJS._loaded) {
                var session = TogetherJS.require("session");
                addStyle();
                session.start();
                return;
            }
            TogetherJS.startup._launch = true;

            addStyle();
            var minSetting = TogetherJS.config.get("useMinimizedCode");
            TogetherJS.config.close("useMinimizedCode");
            if (minSetting !== undefined) {
                min = !!minSetting;
            }
            var requireConfig = TogetherJS._extend(TogetherJS.requireConfig);
            var deps = ["session", "jquery"];

            function callback(session, jquery) {
                TogetherJS._loaded = true;
                if (!min) {
                    TogetherJS.require = require.config({
                        context: "togetherjs"
                    });
                    TogetherJS._requireObject = require;
                }
            }
            if (!min) {
                if (typeof require == "function") {
                    if (!require.config) {
                        console.warn("The global require (", require, ") is not requirejs; please use togetherjs-min.js");
                        throw new Error("Conflict with window.require");
                    }
                    TogetherJS.require = require.config(requireConfig);
                }
            }
            if (typeof TogetherJS.require == "function") {
                TogetherJS.require(deps, callback);
            } else {
                requireConfig.deps = deps;
                requireConfig.callback = callback;
                if (!min) {
                    window.require = requireConfig;
                }
            }
            if (min) {
                addScript("/togetherjs/togetherjsPackage.js");
            } else {
                addScript("/togetherjs/libs/require.js");
            }
        };

        TogetherJS.pageLoaded = Date.now();

        TogetherJS._extend = function(base, extensions) {
            if (!extensions) {
                extensions = base;
                base = {};
            }
            for (var a in extensions) {
                if (extensions.hasOwnProperty(a)) {
                    base[a] = extensions[a];
                }
            }
            return base;
        };

        TogetherJS._startupInit = {
            button: null,
            reason: null,
            continued: false,
            _joinShareId: null,
            _launch: false
        };
        TogetherJS.startup = TogetherJS._extend(TogetherJS._startupInit);
        TogetherJS.running = false;

        TogetherJS.requireConfig = {
            context: "togetherjs",
            baseUrl: baseUrl + "/togetherjs",
            urlArgs: "bust=" + cacheBust,
            paths: {
                jquery: "libs/jquery-1.8.3.min",
                walkabout: "libs/walkabout/walkabout",
                esprima: "libs/walkabout/lib/esprima",
                falafel: "libs/walkabout/lib/falafel",
                tinycolor: "libs/tinycolor",
                whrandom: "libs/whrandom/random"
            }
        };

        TogetherJS._mixinEvents = function(proto) {
            proto.on = function on(name, callback) {
                if (typeof callback != "function") {
                    console.warn("Bad callback for", this, ".once(", name, ", ", callback, ")");
                    throw "Error: .once() called with non-callback";
                }
                if (name.search(" ") != -1) {
                    var names = name.split(/ +/g);
                    names.forEach(function(n) {
                        this.on(n, callback);
                    }, this);
                    return;
                }
                if (this._knownEvents && this._knownEvents.indexOf(name) == -1) {
                    var thisString = "" + this;
                    if (thisString.length > 20) {
                        thisString = thisString.substr(0, 20) + "...";
                    }
                    console.warn(thisString + ".on('" + name + "', ...): unknown event");
                    if (console.trace) {
                        console.trace();
                    }
                }
                if (!this._listeners) {
                    this._listeners = {};
                }
                if (!this._listeners[name]) {
                    this._listeners[name] = [];
                }
                if (this._listeners[name].indexOf(callback) == -1) {
                    this._listeners[name].push(callback);
                }
            };
            proto.once = function once(name, callback) {
                if (typeof callback != "function") {
                    console.warn("Bad callback for", this, ".once(", name, ", ", callback, ")");
                    throw "Error: .once() called with non-callback";
                }
                var attr = "onceCallback_" + name;
                if (!callback[attr]) {
                    callback[attr] = function onceCallback() {
                        callback.apply(this, arguments);
                        this.off(name, onceCallback);
                        delete callback[attr];
                    };
                }
                this.on(name, callback[attr]);
            };
            proto.off = proto.removeListener = function off(name, callback) {
                if (this._listenerOffs) {
                    this._listenerOffs.push([name, callback]);
                    return;
                }
                if (name.search(" ") != -1) {
                    var names = name.split(/ +/g);
                    names.forEach(function(n) {
                        this.off(n, callback);
                    }, this);
                    return;
                }
                if ((!this._listeners) || !this._listeners[name]) {
                    return;
                }
                var l = this._listeners[name],
                    _len = l.length;
                for (var i = 0; i < _len; i++) {
                    if (l[i] == callback) {
                        l.splice(i, 1);
                        break;
                    }
                }
            };
            proto.emit = function emit(name) {
                var offs = this._listenerOffs = [];
                if ((!this._listeners) || !this._listeners[name]) {
                    return;
                }
                var args = Array.prototype.slice.call(arguments, 1);
                var l = this._listeners[name];
                l.forEach(function(callback) {

                    callback.apply(this, args);
                }, this);
                delete this._listenerOffs;
                if (offs.length) {
                    offs.forEach(function(item) {
                        this.off(item[0], item[1]);
                    }, this);
                }

            };
            return proto;
        };

        TogetherJS._teardown = function() {
            var requireObject = TogetherJS._requireObject || window.require;
            if (requireObject.s && requireObject.s.contexts) {
                delete requireObject.s.contexts.togetherjs;
            }
            TogetherJS._loaded = false;
            TogetherJS.startup = TogetherJS._extend(TogetherJS._startupInit);
            TogetherJS.running = false;
        };

        TogetherJS._mixinEvents(TogetherJS);
        TogetherJS._knownEvents = ["ready", "close"];
        TogetherJS.toString = function() {
            return "TogetherJS";
        };

        var defaultHubBase = "https://hub.togetherjs.com";
        if (defaultHubBase == "__" + "hubUrl" + "__") {
            defaultHubBase = "https://hub.togetherjs.mozillalabs.com";
        }
        defaultConfiguration.hubBase = defaultHubBase;

        TogetherJS._configuration = {};
        TogetherJS._defaultConfiguration = defaultConfiguration;
        TogetherJS._configTrackers = {};
        TogetherJS._configClosed = {};
        TogetherJS.config = function(name, maybeValue) {
            var settings;
            if (arguments.length == 1) {
                if (typeof name != "object") {
                    throw new Error('TogetherJS.config(value) must have an object value (not: ' + name + ')');
                }
                settings = name;
            } else {
                settings = {};
                settings[name] = maybeValue;
            }
            var i;
            var tracker;
            for (var attr in settings) {
                if (settings.hasOwnProperty(attr)) {
                    if (TogetherJS._configClosed[attr] && TogetherJS.running) {
                        throw new Error("The configuration " + attr + " is finalized and cannot be changed");
                    }
                }
            }
            for (var attr in settings) {
                if (!settings.hasOwnProperty(attr)) {
                    continue;
                }
                if (attr == "loaded" || attr == "callToStart") {
                    continue;
                }
                if (!TogetherJS._defaultConfiguration.hasOwnProperty(attr)) {
                    console.warn("Unknown configuration value passed to TogetherJS.config():", attr);
                }
                var previous = TogetherJS._configuration[attr];
                var value = settings[attr];
                TogetherJS._configuration[attr] = value;
                var trackers = TogetherJS._configTrackers[name] || [];
                var failed = false;
                for (i = 0; i < trackers.length; i++) {
                    try {
                        tracker = trackers[i];
                        tracker(value, previous);
                    } catch (e) {
                        console.warn("Error setting configuration", name, "to", value,
                            ":", e, "; reverting to", previous);
                        failed = true;
                        break;
                    }
                }
                if (failed) {
                    TogetherJS._configuration[attr] = previous;
                    for (i = 0; i < trackers.length; i++) {
                        try {
                            tracker = trackers[i];
                            tracker(value);
                        } catch (e) {
                            console.warn("Error REsetting configuration", name, "to", previous,
                                ":", e, "(ignoring)");
                        }
                    }
                }
            }
        };

        TogetherJS.config.get = function(name) {
            var value = TogetherJS._configuration[name];
            if (value === undefined) {
                if (!TogetherJS._defaultConfiguration.hasOwnProperty(name)) {
                    console.error("Tried to load unknown configuration value:", name);
                }
                value = TogetherJS._defaultConfiguration[name];
            }
            return value;
        };

        TogetherJS.config.track = function(name, callback) {
            if (!TogetherJS._defaultConfiguration.hasOwnProperty(name)) {
                throw new Error("Configuration is unknown: " + name);
            }
            callback(TogetherJS.config.get(name));
            if (!TogetherJS._configTrackers[name]) {
                TogetherJS._configTrackers[name] = [];
            }
            TogetherJS._configTrackers[name].push(callback);
            return callback;
        };

        TogetherJS.config.close = function(name) {
            if (!TogetherJS._defaultConfiguration.hasOwnProperty(name)) {
                throw new Error("Configuration is unknown: " + name);
            }
            TogetherJS._configClosed[name] = true;
        };

        TogetherJS.reinitialize = function() {
            if (TogetherJS.running && typeof TogetherJS.require == "function") {
                TogetherJS.require(["session"], function(session) {
                    session.emit("reinitialize");
                });
            }
        };

        TogetherJS.refreshUserData = function() {
            if (TogetherJS.running && typeof TogetherJS.require == "function") {
                TogetherJS.require(["session"], function(session) {
                    session.emit("refresh-user-data");
                });
            }
        };
        TogetherJS.version = version;
        TogetherJS.baseUrl = baseUrl;

        TogetherJS.hub = TogetherJS._mixinEvents({});

        TogetherJS._onmessage = function(msg) {
            var type = msg.type;
            if (type.search(/^app\./) === 0) {
                type = type.substr("app.".length);
            } else {
                type = "togetherjs." + type;
            }
            msg.type = type;
            TogetherJS.hub.emit(msg.type, msg);
        };

        TogetherJS.send = function(msg) {
            if (!TogetherJS.require) {
                throw "You cannot use TogetherJS.send() when TogetherJS is not running";
            }
            var session = TogetherJS.require("session");
            session.appSend(msg);
        };

        TogetherJS.shareUrl = function() {
            if (!TogetherJS.require) {
                return null;
            }
            var session = TogetherJS.require("session");
            return session.shareUrl();
        };

        var listener = null;

        TogetherJS.listenForShortcut = function() {
            console.warn("Listening for alt-T alt-T to start TogetherJS");
            TogetherJS.removeShortcut();
            listener = function listener(event) {
                if (event.which == 84 && event.altKey) {
                    if (listener.pressed) {
                        TogetherJS();
                    } else {
                        listener.pressed = true;
                    }
                } else {
                    listener.pressed = false;
                }
            };
            TogetherJS.once("ready", TogetherJS.removeShortcut);
            document.addEventListener("keyup", listener, false);
        };

        TogetherJS.removeShortcut = function() {
            if (listener) {
                document.addEventListener("keyup", listener, false);
                listener = null;
            }
        };

        TogetherJS.config.track("enableShortcut", function(enable, previous) {
            if (enable) {
                TogetherJS.listenForShortcut();
            } else if (previous) {
                TogetherJS.removeShortcut();
            }
        });

        TogetherJS.checkForUsersOnChannel = function(address, callback) {
            if (address.search(/^https?:/i) === 0) {
                address = address.replace(/^http/i, 'ws');
            }
            var socket = new WebSocket(address);
            var gotAnswer = false;
            socket.onmessage = function(event) {
                var msg = JSON.parse(event.data);
                if (msg.type != "init-connection") {
                    console.warn("Got unexpected first message (should be init-connection):", msg);
                    return;
                }
                if (gotAnswer) {
                    console.warn("Somehow received two responses from channel; ignoring second");
                    socket.close();
                    return;
                }
                gotAnswer = true;
                socket.close();
                callback(msg.peerCount);
            };
            socket.onclose = socket.onerror = function() {
                if (!gotAnswer) {
                    console.warn("Socket was closed without receiving answer");
                    gotAnswer = true;
                    callback(undefined);
                }
            };
        };

        var hash = location.hash.replace(/^#/, "");
        var m = /&?togetherjs=([^&]*)/.exec(hash);
        if (m) {
            TogetherJS.startup._joinShareId = m[1];
            TogetherJS.startup.reason = "joined";
            var newHash = hash.substr(0, m.index) + hash.substr(m.index + m[0].length);
            location.hash = newHash;
        }
        if (window._TogetherJSShareId) {
            TogetherJS.startup._joinShareId = window._TogetherJSShareId;
            delete window._TogetherJSShareId;
        }

        function conditionalActivate() {
            if (window.TogetherJSConfig_noAutoStart) {
                return;
            }
            var callToStart = window.TogetherJSConfig_callToStart;
            if (!callToStart && window.TowTruckConfig_callToStart) {
                callToStart = window.TowTruckConfig_callToStart;
                console.warn("Please rename TowTruckConfig_callToStart to TogetherJSConfig_callToStart");
            }
            if (window.TogetherJSConfig && window.TogetherJSConfig.callToStart) {
                callToStart = window.TogetherJSConfig.callToStart;
            }
            if (callToStart) {
                callToStart(onload);
            } else {
                onload();
            }
        }

        function onload() {
            if (TogetherJS.startup._joinShareId) {
                TogetherJS();
            } else if (window._TogetherJSBookmarklet) {
                delete window._TogetherJSBookmarklet;
                TogetherJS();
            } else {
                var key = "togetherjs-session.status";
                var value = sessionStorage.getItem(key);
                if (value) {
                    value = JSON.parse(value);
                    if (value && value.running) {
                        TogetherJS.startup.continued = true;
                        TogetherJS.startup.reason = value.startupReason;
                        TogetherJS();
                    }
                } else if (window.TogetherJSConfig_autoStart ||
                    (window.TogetherJSConfig && window.TogetherJSConfig.autoStart)) {
                    TogetherJS.startup.reason = "joined";
                    TogetherJS();
                }
            }
        }

        conditionalActivate();

        if (window.TogetherJSConfig_enableShortcut) {
            TogetherJS.listenForShortcut();
        }
        window.TowTruck = TogetherJS;

    })();
    </script>
   
    <style type="text/css">
    .flex-container {
        display: -webkit-flex;
        display: flex;
        -webkit-flex-flow: row wrap;
        flex-flow: row wrap;
        text-align: center;
    }
    
    .flex-container > * {
        padding: 15px;
        -webkit-flex: 1 100%;
        flex: 1 100%;
    }
    
    .article {
        text-align: left;
        min-height: 590px;
    }
    
    #toolheader {
        background: #dfe5e9;
        margin: -15px;
        padding: 10px;
        text-align: center;
        font-family: "Roboto", serif;
        letter-spacing: 1px;
    }
    
    #clr {
        width: 5%;
        height: 4%;
        background: #777;
        color: #fff;
        font-family: "Open Sans", serif;
        font-size: 12px;
        border: 2px solid #bbb;
        transition: all 0.3s ease 0s;
    }
    
    #clr:hover {
        background: #bbb;
        border: 2px solid #eee;
    }
    
    #change {
        width: 3%;
        height: 4%;
        background: #777;
        color: #fff;
        font-family: "Open Sans", serif;
        font-size: 12px;
        border: 2px solid #bbb;
        transition: all 0.3s ease 0s;
    }
    
    #change:hover {
        background: #bbb;
        border: 2px solid #eee;
    }
    
    header {
        background: #FD5F5F;
        color: white;
        font-family: "Roboto Slab", serif;
        letter-spacing: 2px;
        font-size: 120%;
        line-height: 20px;
        border-style: solid;
        border-color: #76bdda;
        border-width: 0 0 8px 0;
    }
    
    footer {
        background: #FD5F5F;
        color: white;
        font-family: "Roboto", serif;
        line-height: 55px;
    }
    
    .nav {
        background: #ecf0f1;
        border-style: solid;
        border-color: #dfe5e9;
        border-width: 0 3px 0 0;
    }
    
    body {
        margin: 0;
        padding: 0;
    }
    
    nav {
        font-family: "Open Sans", serif;
    }
    
    .nav ul {
        list-style-type: none;
        padding: 0;
    }
    
    .nav ul a {
        text-decoration: none;
    }
    
    @media all and (min-width: 768px) {
        .nav {
            text-align: left;
            -webkit-flex: 1 auto;
            flex: 1 auto;
            -webkit-order: 1;
            order: 1;
        }
        .article {
            -webkit-flex: 5 0px;
            flex: 5 0px;
            -webkit-order: 2;
            order: 2;
        }
        footer {
            -webkit-order: 3;
            order: 3;
        }
    }
    </style>
    <meta charset="utf8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <title>Red Clover Reader</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
        <script src="reader/js/reader.js"></script>
        <link rel="stylesheet" href="reader/reader.css">
</head>

<body>
    
    <div class="flex-container" id="sketchapp">

        <div id="sketchContainer" class="article" style="width: 100%; border: 1px solid rgba(0,0,0,.2);">
            <center>
                <canvas id="comic" width="900%" height="570%" color="#FFFFFF" style="\border:6px solid #ecf0f1;"></canvas>
            </center>
        </div>

        <nav class="nav" style="width: 6%; border: 1px solid rgba(0,0,0,.2);">
            <div>
              <br>
                <div style="cursor:pointer;position:absolute;top:0.5%;left:25%;width:20px;height:20px;background:#27ae60;" class="color-picker" id="green"></div>
                <div style="cursor:pointer;position:absolute;top:0.5%;left:28%;width:20px;height:20px;background:#2980b9;" class="color-picker" id="blue"></div>
                <div style="cursor:pointer;position:absolute;top:0.5%;left:31%;width:20px;height:20px;background:#e74c3c;" class="color-picker" id="red"></div>
                <div style="cursor:pointer;position:absolute;top:3%;left:25%;width:20px;height:20px;background:#f1c40f;" class="color-picker" id="yellow"></div>
                <div style="cursor:pointer;position:absolute;top:3%;left:28%;width:20px;height:20px;background:#d35400;" class="color-picker" id="orange"></div>
                <div style="cursor:pointer;position:absolute;top:3%;left:31%;width:20px;height:20px;background:#2c3e50;" class="color-picker" id="black"></div>
                <div style="cursor:pointer;position:absolute;top:0.5%;left:37.5%;width:30px;height:30px;background:white;border:2px solid;" class="eraser" id="white"></div>
                <input type="button" class="clear" value="clear" id="clr" size="30" style="cursor:pointer;position:absolute;top:0.5%;left:47.5%;">
                <input type="button" class="minus-size" value="-" id="change" size="30" style="cursor:pointer;position:absolute;top:1%;left:66%;">
                <input type="button" class="plus-size" value="+" id="change" size="30" style="cursor:pointer;position:absolute;top:1%; left:62%">
                <input type="button" class="pull-right btn" value="Collaborate" onclick="TogetherJS(this); return false;" size="30" style="cursor:pointer;position:absolute;top:2%;left:75%;">
                
            </div>
        
        </nav>
    </div>
    <script type="text/javascript">
    var canvas = document.getElementById('comic');
    var context = canvas.getContext('2d');

    canvas.width = $('#sketchContainer').outerWidth();
    canvas.height = (canvas.width / 800) * 400;
    $('#sketchContainer').outerHeight(String(canvas.height) + "px", true);

    var oWidth = canvas.width;
    var oHeight = canvas.height;
    var lines = [];

    var lastMouse = {
        x: 0,
        y: 0
    };

    var ongoingTouches = [];

    context.lineWidth = 2;
    context.lineJoin = 'round';
    context.lineCap = 'round';
    context.strokeStyle = '#000';

    canvas.addEventListener('mousedown', function(e) {
        lastMouse = {
            x: e.pageX - this.offsetLeft,
            y: e.pageY - this.offsetTop
        };
        canvas.addEventListener('mousemove', move, false);
    }, false);

    canvas.addEventListener('mouseout', function() {
        canvas.removeEventListener('mousemove', move, false);
    }, false);

    canvas.addEventListener('mouseup', function() {
        canvas.removeEventListener('mousemove', move, false);
    }, false);

    canvas.addEventListener('touchstart', touchstart, false);
    canvas.addEventListener('touchend', touchend, false);
    canvas.addEventListener('touchcancel', touchcancel, false);
    canvas.addEventListener('touchleave', touchend, false);
    canvas.addEventListener('touchmove', touchmove, false);

    function setSize(size) {
        context.lineWidth = size;
    }

    function setColor(color) {
        context.globalCompositeOperation = 'source-over';
        context.strokeStyle = color;
    }

    function eraser() {
        context.globalCompositeOperation = 'destination-out';
        context.strokeStyle = 'rgba(0,0,0,1)';
    }

    function clear(send) {
        var m = confirm("Do you want to clear the picture?");
        if (m) {
            context.clearRect(0, 0, canvas.width, canvas.height);
            lines = [];
            if (send && TogetherJS.running) {
                TogetherJS.send({
                    type: 'clear'
                });
            }
        }
    }

    function reDraw(lines) {
        for (var i in lines) {
            draw(lines[i][0], lines[i][1], lines[i][2], lines[i][3], lines[i][4], false);
        }
    }

    function draw(start, end, color, size, compositeOperation, save) {
        context.save();
        context.lineJoin = 'round';
        context.lineCap = 'round';
        context.scale(canvas.width / 800, canvas.height / 400);
        context.strokeStyle = color;
        context.globalCompositeOperation = compositeOperation;
        context.lineWidth = size;
        context.beginPath();
        context.moveTo(start.x, start.y);
        context.lineTo(end.x, end.y);
        context.closePath();
        context.stroke();
        context.restore();
        if (save) {
            lines.push([{
                x: start.x,
                y: start.y
            }, {
                x: end.x,
                y: end.y
            }, color, size, compositeOperation]);
        }
    }

    function move(e) {
        var mouse = {
            x: e.pageX - this.offsetLeft,
            y: e.pageY - this.offsetTop
        };
        sendMouse = {
            x: (800 / canvas.width) * mouse.x,
            y: (400 / canvas.height) * mouse.y
        };
        sendLastMouse = {
            x: (800 / canvas.width) * lastMouse.x,
            y: (400 / canvas.height) * lastMouse.y
        };
        draw(sendLastMouse, sendMouse, context.strokeStyle, context.lineWidth, context.globalCompositeOperation, true);
        if (TogetherJS.running) {
            TogetherJS.send({
                type: 'draw',
                start: sendLastMouse,
                end: sendMouse,
                color: context.strokeStyle,
                size: context.lineWidth,
                compositeOperation: context.globalCompositeOperation
            });
        }
        lastMouse = mouse;
    }

    function convertTouch(touch) {
        return {
            x: (800 / canvas.width) * (touch.pageX - canvas.offsetLeft),
            y: (400 / canvas.height) * (touch.pageY - canvas.offsetTop),
            identifier: touch.identifier
        };
    }

    function searchOngoingTouches(identifier) {
        for (var i = 0; i < ongoingTouches.length; i++) {
            if (ongoingTouches[i].identifier == identifier) {
                return i;
            }
        }
        return -1;
    }

    function touchstart(e) {
        e.preventDefault();
        var touches = e.changedTouches;
        for (var i = 0; i < touches.length; i++) {
            var idx = searchOngoingTouches(touches[i].identifier);
            ongoingTouches.push(convertTouch(touches[i]));
        }
    }

    function touchmove(e) {
        e.preventDefault();
        var touches = e.changedTouches;
        for (var i = 0; i < touches.length; i++) {
            var idx = searchOngoingTouches(touches[i].identifier);
            if (idx >= 0) {
                var lastTouch = ongoingTouches[idx];
                var touch = convertTouch(touches[i]);
                draw(lastTouch, touch, context.strokeStyle, context.lineWidth, context.globalCompositeOperation, true);
                if (TogetherJS.running) {
                    TogetherJS.send({
                        type: 'draw',
                        start: lastTouch,
                        end: touch,
                        color: context.strokeStyle,
                        size: context.lineWidth,
                        compositeOperation: context.globalCompositeOperation
                    });
                }
                ongoingTouches.splice(idx, 1, touch);
            }
        }
    }

    // Called whenever touchend or touchleave events are fired
    function touchend(e) {
        e.preventDefault();
        var touches = e.changedTouches;
        for (var i = 0; i < touches.length; i++) {
            var idx = searchOngoingTouches(touches[i].identifier);
            if (idx >= 0) {
                var lastTouch = ongoingTouches[idx];
                var touch = convertTouch(touches[i]);
                draw(lastTouch, touch, context.strokeStyle, context.lineWidth, context.globalCompositeOperation, true);
                if (TogetherJS.running) {
                    TogetherJS.send({
                        type: 'draw',
                        start: lastTouch,
                        end: touch,
                        color: context.strokeStyle,
                        size: context.lineWidth,
                        compositeOperation: context.globalCompositeOperation
                    });
                }
                ongoingTouches.splice(idx, 1);
            }
        }
    }

    function touchcancel(e) {
        e.preventDefault();
        var touches = e.changedTouches;
        for (var i = 0; i < touches.length; i++) {
            var idx = searchOngoingTouches(touches[i].identifier);
            if (idx >= 0) {
                ongoingTouches.splice(idx, 1);
            }
        }
    }

    TogetherJS.hub.on('draw', function(msg) {
        if (!msg.sameUrl) {
            return;
        }
        draw(msg.start, msg.end, msg.color, msg.size, msg.compositeOperation, true);
    });

    TogetherJS.hub.on('page', function(msg) {
        if (!msg.sameUrl) {
            return;
        }

        window.location.href="#" + msg.pageNumber
    });

    TogetherJS.hub.on('clear', function(msg) {
        if (!msg.sameUrl) {
            return;
        }
        context.clearRect(0, 0, canvas.width, canvas.height);
        lines = [];
    });

    TogetherJS.hub.on('togetherjs.hello', function() {
        TogetherJS.send({
            type: 'init',
            lines: lines
        });
    });

    TogetherJS.hub.on('togetherjs.hello-back', function(msg) {
        window.location.href = msg.urlHash
    });

    TogetherJS.hub.on('init', function(msg) {
        reDraw(msg.lines);
        lines = msg.lines;
    });

    $(document).ready(function() {
        function changeMouse() {
            var cursorSize = context.lineWidth * (canvas.width / 800);
            if (cursorSize < 10) {
                cursorSize = 10;
            }
            var cursorColor = context.strokeStyle;
            var cursorGenerator = document.createElement('canvas');
            cursorGenerator.width = cursorSize;
            cursorGenerator.height = cursorSize;
            var ctx = cursorGenerator.getContext('2d');

            var centerX = cursorGenerator.width / 2;
            var centerY = cursorGenerator.height / 2;

            ctx.beginPath();
            ctx.arc(centerX, centerY, (cursorSize / 2) - 4, 0, 2 * Math.PI, false);
            ctx.lineWidth = 3;
            ctx.strokeStyle = cursorColor;
            ctx.stroke();
            $('#comic').css('cursor', 'url(' + cursorGenerator.toDataURL('image/png') + ') ' + cursorSize / 2 + ' ' + cursorSize / 2 + ',crosshair');
        }
        changeMouse();

        $(window).resize(function() {
            if ($('#sketchContainer').width() != oWidth) {
                canvas.width = $('#sketchContainer').width();
                canvas.height = (canvas.width / 800) * 400;
                $('#sketchContainer').outerHeight(String(canvas.height) + "px", true);
                var ratio = canvas.width / oWidth;
                oWidth = canvas.width;
                oHeight = canvas.height;
                reDraw(lines);
                changeMouse();
            }
        });

        $('.clear').click(function() {
            clear(true);
        });

        $('.color-picker').click(function() {
            var $this = $(this);
            setColor($this.css("background-color"));
            changeMouse();
        });

        $('.eraser').click(function() {
            eraser();
            changeMouse();
        });
        // TogetherJS user color:
        $('.user-color-pick').click(function() {
            setColor(TogetherJS.require('peers').Self.color);
            changeMouse();
        });

        // Increase/decrease brush size:
        $('.plus-size').click(function() {
            setSize(context.lineWidth + 3);
            changeMouse();
        });

        $('.minus-size').click(function() {
            if (context.lineWidth > 3) {
                setSize(context.lineWidth - 3);
            }
            changeMouse();
        });
    });
    </script>
    <script>
            var book = new ComicBook('comic', [
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-001.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-002.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-003.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-004.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-005.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-006.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-007.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-008.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-009.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-010.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-011.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-012.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-013.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-014.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-015.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-016.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-017.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-018.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-019.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-020.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-021.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-022.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-023.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-024.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-025.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-026.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-027.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-028.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-029.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-030.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-031.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-032.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-033.jpg',
                'RatsMusicalBand/Rat s Musical Band_Wendy White-page-034.jpg',
                
            ], {
        });

            book.draw();

            $(window).on('resize', function(event) {
                book.draw();
            });
        </script>
</body>

</html>

